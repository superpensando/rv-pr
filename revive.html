<!DOCTYPE html>
<html lang="es">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>ReVive – Recuerdos en Realidad Mixta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- A-FRAME Library -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <!-- Troika Text: high-quality text rendering with real fonts (supports accents and Unicode) -->
  <script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const textEl = document.querySelector('#reviveText');
      if (!textEl) return;

      const text =
        "Adéntrate en este libro.\n" +
        "Cada página guarda un recuerdo;\n" +
        "cada recuerdo puede volver a habitarse.\n\n" +
        "Este libro no se lee:\n" +
        "se atraviesa.";

      // Troika uses the "troika-text" component
      textEl.setAttribute('troika-text', 'value', text);
    });

    AFRAME.registerComponent('go-to-vr', {
      schema: { url: { type: 'string' } },
      init: function () {
        this.el.addEventListener('click', () => {
          window.location.href = this.data.url;
        });
      }
    });
  </script>


  <style>
    html,
    body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #4a3c29;
      color: #fff;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <!-- Scene -->
  <a-scene embedded renderer="colorManagement: true; physicallyCorrectLights: true">

    <!-- Assets -->
    <a-assets>
      <a-asset-item id="photo-album-obj" src="resources/photo-album.obj"></a-asset-item>
      <a-asset-item id="photo-album-mtl" src="resources/photo-album.mtl"></a-asset-item>
      <img id="parchmentTex" src="resources/ph-cover-texture.jpg" />
      <img id="vrPreview" src="resources/img-revive-source.png" crossorigin="anonymous" />
    </a-assets>

    <!-- Scene background -->
    <a-sky src="#parchmentTex" rotation="180 -90 90"></a-sky>

    <!-- Lights -->
    <a-light type="ambient" intensity="0.35" color="#ffefd5"></a-light>
    <a-light type="directional" intensity="0.55" position="1 2 1"></a-light>


    <!-- Parchment panel (manuscript style) -->
    <a-entity position="0 2.35 -2">

      <!-- Subtle border (optional, used as a frame) -->
      <a-circle radius="1" position="0 0.8 -0.002"
        material="color:#091719; transparent:true; opacity:0.7;"></a-circle>

      <!-- Handwritten-style text -->
      <a-entity id="reviveText"
        troika-text="value: ; fontSize: 0.07; color: #AE8636; align: center; maxWidth: 1.75; lineHeight: 1.30;"
        position="0 0.4 0.01">
      </a-entity>

    </a-entity>



    <a-entity position="0 0 0" scale="1 1 1"
      animation__pulse="property: scale; dir: alternate; dur: 1200; easing: easeInOutSine; loop: true; to: 1.04 1 1.04">
   >

      <!-- Photo album -->
      <a-entity id="photoAlbum" obj-model="obj:#photo-album-obj; mtl:#photo-album-mtl" position="0 11 -2"
        rotation="4 90 45" scale="0.7 0.7 0.7">
      </a-entity>
      <a-entity id="photoAlbumTitle" troika-text="value: RE*VIVE; fontSize: 0.045; color: #15110A; align: center;"
        position="-0.13 1.55 -0.5" rotation="-40 40 -30">
      </a-entity>
      <a-entity id="photoAlbumText" troika-text="value: Navidades 1953; fontSize: 0.035; color: #15110A; align: center;"
        position="0.26 1.53 -0.99" rotation="-40 0 0">
      </a-entity>

      <a-plane id="photoAlbumPhoto" class="clickable" go-to-vr="url: revive-vr.html" position="0.3 1.40 -1"
        rotation="-40 0 0" width="1.5" height="0.8" scale="0.28 0.28 0.28" material="shader: flat; src: #vrPreview;"
        side="double">
      </a-plane>
    </a-entity>

    <!-- Camera -->
    <a-camera position="0 1.6 0">
      <a-cursor rayOrigin="mouse" raycaster="objects: .clickable" color="#AE8636">
      </a-cursor>
    </a-camera>

  </a-scene>

</body>

</html>